{% extends 'base.html' %}

{% block title %}Calcular Fator de Sensibilidade{% endblock %}

{% block content %}
<div class="card p-4 shadow-sm">
    <h1 class="mb-4">Calculadora do Fator de Sensibilidade</h1>
    <p class="text-muted">Calcule seu Fator de Sensibilidade à Insulina (FS) com base na sua Dose Total Diária (DTDI).</p>

    <form action="{{ url_for('calcular_fs') }}" method="post">
        <div class="mb-3">
            <label for="dtdi" class="form-label">Dose Total Diária de Insulina (UI)</label>
            <input type="number" step="0.1" class="form-control" id="dtdi" name="dtdi" required>
            <div class="form-text">Soma de todas as doses de insulina aplicadas em um dia.</div>
        </div>
        <div class="mb-3">
            <label for="tipo_insulina" class="form-label">Tipo de Insulina para Correção</label>
            <select class="form-select" id="tipo_insulina" name="tipo_insulina">
                <option value="ultrarapida">Análogos Ultrarrápidos (Lispro, Aspart, Glulisina)</option>
                <option value="rapida">Regular</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary w-100">Calcular FS</button>
    </form>

    {% if resultado_fs is not none %}
    <div class="alert alert-success mt-4">
        <h4 class="alert-heading">Seu Fator de Sensibilidade (FS) é:</h4>
        <hr>
        <p class="fs-4">
            <strong>{{ resultado_fs }} mg/dL</strong>
        </p>
        <p>
            <small>Isso significa que 1 unidade de sua insulina de correção tende a baixar a sua glicemia em aproximadamente {{ resultado_fs }} mg/dL.</small>
        </p>
    </div>
    {% endif %}

    <div class="text-center mt-3">
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Voltar ao Painel</a>
    </div>
</div>
{% endblock %}